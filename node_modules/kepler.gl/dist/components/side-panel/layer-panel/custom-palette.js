"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _react = _interopRequireWildcard(require("react"));

var _classnames = _interopRequireDefault(require("classnames"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reselect = require("reselect");

var _styledComponents = _interopRequireWildcard(require("styled-components"));

var _reactSortableHoc = require("react-sortable-hoc");

var _reactModal = _interopRequireDefault(require("react-modal"));

var _styledComponents2 = require("../../common/styled-components");

var _icons = require("../../common/icons");

var _colorPalette = _interopRequireDefault(require("./color-palette"));

var _customPicker = _interopRequireDefault(require("./custom-picker"));

var _dataUtils = require("../../../utils/data-utils");

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _templateObject9() {
  var data = (0, _taggedTemplateLiteral2["default"])(["\n  margin-left: 12px;\n  input {\n    color: ", ";\n    font-size: 10px;\n  }\n"]);

  _templateObject9 = function _templateObject9() {
    return data;
  };

  return data;
}

function _templateObject8() {
  var data = (0, _taggedTemplateLiteral2["default"])(["\n  margin-top: 11px;\n  display: flex;\n  direction: rtl;\n"]);

  _templateObject8 = function _templateObject8() {
    return data;
  };

  return data;
}

function _templateObject7() {
  var data = (0, _taggedTemplateLiteral2["default"])(["\n  padding: 0 8px;\n  :hover {\n    background-color: ", ";\n    cursor: pointer;\n  }\n"]);

  _templateObject7 = function _templateObject7() {
    return data;
  };

  return data;
}

function _templateObject6() {
  var data = (0, _taggedTemplateLiteral2["default"])(["\n  background-color: ", ";\n  width: 32px;\n  height: 18px;\n  display: inline-block;\n  :hover {\n    box-shadow: ", ";\n    cursor: pointer;\n  }\n"]);

  _templateObject6 = function _templateObject6() {
    return data;
  };

  return data;
}

function _templateObject5() {
  var data = (0, _taggedTemplateLiteral2["default"])(["\n  width: calc(100% - 16px);\n  height: 1px;\n  background-color: ", ";\n  margin-top: 8px;\n  margin-left: 8px;\n"]);

  _templateObject5 = function _templateObject5() {
    return data;
  };

  return data;
}

function _templateObject4() {
  var data = (0, _taggedTemplateLiteral2["default"])(["\n  color: ", ";\n  svg {\n    :hover {\n      color: ", ";\n    }\n  }\n  height: 12px;\n  margin-left: auto;\n  margin-right: 12px;\n  :hover {\n    cursor: pointer;\n  }\n"]);

  _templateObject4 = function _templateObject4() {
    return data;
  };

  return data;
}

function _templateObject3() {
  var data = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  align-items: center;\n  opacity: 0;\n"]);

  _templateObject3 = function _templateObject3() {
    return data;
  };

  return data;
}

function _templateObject2() {
  var data = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  align-items: center;\n  padding-top: 6px;\n  padding-bottom: 6px;\n  z-index: ", ";\n\n  :not(.sorting) {\n    :hover {\n      background-color: ", ";\n      ", "\n    }\n  }\n\n  &.sorting-colors {\n    background-color: ", ";\n    ", "\n  }\n"]);

  _templateObject2 = function _templateObject2() {
    return data;
  };

  return data;
}

function _templateObject() {
  var data = (0, _taggedTemplateLiteral2["default"])(["\n  .layer__drag-handle {\n    color: ", ";\n    opacity: 1;\n    cursor: move;\n  }\n"]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}

var dragHandleActive = (0, _styledComponents.css)(_templateObject(), function (props) {
  return props.theme.textColorHl;
});

var StyledSortableItem = _styledComponents["default"].div(_templateObject2(), function (props) {
  return props.theme.dropdownWrapperZ + 1;
}, function (props) {
  return props.theme.panelBackgroundHover;
}, dragHandleActive, function (props) {
  return props.theme.panelBackgroundHover;
}, dragHandleActive);

var StyledDragHandle = _styledComponents["default"].div(_templateObject3());

var StyledTrash = _styledComponents["default"].div(_templateObject4(), function (props) {
  return props.theme.textColor;
}, function (props) {
  return props.theme.subtextColorActive;
});

var StyledLine = _styledComponents["default"].div(_templateObject5(), function (props) {
  return props.theme.labelColor;
});

var StyledSwatch = _styledComponents["default"].div.attrs({
  className: 'custom-palette__swatch'
})(_templateObject6(), function (props) {
  return props.color;
}, function (props) {
  return props.theme.boxShadow;
});

var StyledColorRange = _styledComponents["default"].div(_templateObject7(), function (props) {
  return props.theme.panelBackgroundHover;
});

var StyledButtonContainer = _styledComponents["default"].div(_templateObject8());

var StyledInlineInput = _styledComponents["default"].div(_templateObject9(), function (props) {
  return props.theme.textColorHl;
});

var SortableItem = (0, _reactSortableHoc.sortableElement)(function (_ref) {
  var children = _ref.children,
      isSorting = _ref.isSorting;
  return _react["default"].createElement(StyledSortableItem, {
    className: (0, _classnames["default"])('custom-palette__sortable-items', {
      sorting: isSorting
    })
  }, children);
});
var SortableContainer = (0, _reactSortableHoc.sortableContainer)(function (_ref2) {
  var children = _ref2.children;
  return _react["default"].createElement("div", null, children);
});
var DragHandle = (0, _reactSortableHoc.sortableHandle)(function (_ref3) {
  var className = _ref3.className,
      children = _ref3.children;
  return _react["default"].createElement(StyledDragHandle, {
    className: className
  }, children);
});

var CustomPalette =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(CustomPalette, _Component);

  function CustomPalette() {
    var _getPrototypeOf2;

    var _this;

    (0, _classCallCheck2["default"])(this, CustomPalette);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = (0, _possibleConstructorReturn2["default"])(this, (_getPrototypeOf2 = (0, _getPrototypeOf3["default"])(CustomPalette)).call.apply(_getPrototypeOf2, [this].concat(args)));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "state", {
      // currentSwatchIndex: null,
      isSorting: false
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "root", (0, _react.createRef)());
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "showSketcherSelector", function (props) {
      return props.showSketcher;
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "themeSelector", function (props) {
      return props.theme;
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "sketcherPosSelector", (0, _reselect.createSelector)(_this.showSketcherSelector, function (showSketcher) {
      var theme = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var _this$props = _this.props,
          defaultSketcherPos = _this$props.defaultSketcherPos,
          bottomBuffer = _this$props.bottomBuffer,
          sketcherHeight = _this$props.sketcherHeight;
      if (showSketcher === false || !_this.root || !_this.root.current) return defaultSketcherPos;
      var _theme$sidePanelInner = theme.sidePanelInnerPadding,
          sidePanelInnerPadding = _theme$sidePanelInner === void 0 ? 16 : _theme$sidePanelInner,
          _theme$sidePanel = theme.sidePanel,
          sidePanel = _theme$sidePanel === void 0 ? {} : _theme$sidePanel,
          _theme$sidePanelScrol = theme.sidePanelScrollBarWidth,
          sidePanelScrollBarWidth = _theme$sidePanelScrol === void 0 ? 10 : _theme$sidePanelScrol;
      var sidePanelLeft = (sidePanel.margin || {}).left || 20;
      var offsetX = sidePanelInnerPadding + sidePanelLeft + sidePanelScrollBarWidth; // find component Root position

      var bounding = _this.root.current.getBoundingClientRect();

      var x = bounding.x,
          y = bounding.y,
          width = bounding.width; // set the top so it won't collide with bottom widget

      var top = y + sketcherHeight <= window.innerHeight - bottomBuffer ? y : window.innerHeight - bottomBuffer - sketcherHeight;
      return {
        top: "".concat(top, "px"),
        left: "".concat(x + width + offsetX, "px")
      };
    }));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "modalStylesSelector", (0, _reselect.createSelector)(_this.themeSelector, _this.sketcherPosSelector, function (theme, sketcherPos) {
      return {
        content: {
          top: 0,
          left: 0,
          border: 0,
          right: 'auto',
          bottom: 'auto',
          padding: '0px 0px 0px 0px',
          borderRadius: theme.panelBorderRadius || '2px'
        },
        overlay: _objectSpread({}, sketcherPos, {
          right: 'auto',
          bottom: 'auto',
          backgroundColor: 'rgba(0, 0, 0, 0)'
        })
      };
    }));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_onPickerUpdate", function (color) {
      var colors = _this.props.customPalette.colors;
      var newColors = (0, _toConsumableArray2["default"])(colors);
      newColors[_this.props.showSketcher] = color.hex;

      _this._setColorPaletteUI(newColors);
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_onColorDelete", function (index) {
      var colors = _this.props.customPalette.colors;
      var newColors = (0, _toConsumableArray2["default"])(colors);

      if (newColors.length > 1) {
        newColors.splice(index, 1);
      }

      _this._setColorPaletteUI(newColors);
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_onColorAdd", function () {
      var colors = _this.props.customPalette.colors; // add the last color

      var newColors = [].concat((0, _toConsumableArray2["default"])(colors), [colors[colors.length - 1]]);

      _this._setColorPaletteUI(newColors);
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_onSwatchClick", function (index) {
      _this.props.onToggleSketcher(index);
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_onSwatchClose", function () {
      _this.props.onToggleSketcher(false);
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_onApply", function (event) {
      event.stopPropagation();
      event.preventDefault();

      _this.props.onCancel();

      _this.props.onApply(_this.props.customPalette, event);
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_onSortEnd", function (_ref4) {
      var oldIndex = _ref4.oldIndex,
          newIndex = _ref4.newIndex;
      var colors = _this.props.customPalette.colors;
      var newColors = (0, _dataUtils.arrayMove)(colors, oldIndex, newIndex);

      _this._setColorPaletteUI(newColors);

      _this.setState({
        isSorting: false
      });
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_onSortStart", function () {
      _this.setState({
        isSorting: true
      });
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_inputColorHex", function (index, _ref5) {
      var value = _ref5.target.value;
      var colors = _this.props.customPalette.colors;
      var newColors = (0, _toConsumableArray2["default"])(colors);
      newColors[index] = value.toUpperCase();

      _this._setColorPaletteUI(newColors);
    });
    return _this;
  }

  (0, _createClass2["default"])(CustomPalette, [{
    key: "_setColorPaletteUI",
    value: function _setColorPaletteUI(colors) {
      this.props.setCustomPalette({
        colors: colors
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var colors = this.props.customPalette.colors;
      var modalStyles = this.modalStylesSelector(this.props);
      return _react["default"].createElement("div", {
        className: "custom-palette-panel",
        ref: this.root
      }, _react["default"].createElement(StyledColorRange, null, _react["default"].createElement(_colorPalette["default"], {
        colors: colors
      })), _react["default"].createElement(SortableContainer, {
        className: "custom-palette-container",
        onSortEnd: this._onSortEnd,
        onSortStart: this._onSortStart,
        lockAxis: "y",
        helperClass: "sorting-colors",
        useDragHandle: true
      }, colors.map(function (color, index) {
        return _react["default"].createElement(SortableItem, {
          key: index,
          index: index,
          isSorting: _this2.state.isSorting
        }, _react["default"].createElement(DragHandle, {
          className: "layer__drag-handle"
        }, _react["default"].createElement(_icons.VertDots, {
          height: "20px"
        })), _react["default"].createElement(StyledSwatch, {
          color: color,
          onClick: function onClick(e) {
            return _this2._onSwatchClick(index, e);
          }
        }), _react["default"].createElement(StyledInlineInput, null, _react["default"].createElement(_styledComponents2.InlineInput, {
          type: "text",
          className: "custom-palette-hex__input",
          value: color.toUpperCase(),
          onClick: function onClick(e) {
            e.stopPropagation();
          },
          onChange: function onChange(e) {
            return _this2._inputColorHex(index, e);
          },
          id: "input-layer-label"
        })), _react["default"].createElement(StyledTrash, {
          onClick: function onClick() {
            return _this2._onColorDelete(index);
          }
        }, _react["default"].createElement(_icons.Trash, {
          className: "trashbin"
        })));
      })), _react["default"].createElement(_styledComponents2.Button, {
        className: "add-step__button",
        link: true,
        onClick: this._onColorAdd
      }, "+ Add Step"), _react["default"].createElement(StyledLine, null), _react["default"].createElement(StyledButtonContainer, null, _react["default"].createElement(_styledComponents2.Button, {
        className: "confirm-apply__button",
        link: true,
        onClick: this._onApply
      }, "Confirm"), _react["default"].createElement(_styledComponents2.Button, {
        link: true,
        onClick: this.props.onCancel
      }, ' ', "Cancel")), this.props.showSketcher !== false ? _react["default"].createElement(_reactModal["default"], {
        isOpen: true,
        style: modalStyles,
        ariaHideApp: false,
        parentSelector: function parentSelector() {
          // React modal issue: https://github.com/reactjs/react-modal/issues/769
          // failed to execute removeChild on parent node when it is already unmounted
          return _this2.root.current || {
            removeChild: function removeChild() {},
            appendChild: function appendChild() {}
          };
        }
      }, _react["default"].createElement(_customPicker["default"], {
        color: colors[this.props.showSketcher],
        onChange: this._onPickerUpdate,
        onSwatchClose: this._onSwatchClose
      })) : null);
    }
  }]);
  return CustomPalette;
}(_react.Component);

(0, _defineProperty2["default"])(CustomPalette, "propTypes", {
  customPalette: _propTypes["default"].shape({
    name: _propTypes["default"].string,
    type: _propTypes["default"].string,
    category: _propTypes["default"].string,
    colors: _propTypes["default"].arrayOf(_propTypes["default"].string)
  }),
  setCustomPalette: _propTypes["default"].func,
  showSketcher: _propTypes["default"].oneOfType([_propTypes["default"].bool, _propTypes["default"].number]),
  theme: _propTypes["default"].object,
  defaultSketcherPos: _propTypes["default"].object,
  sketcherHeight: _propTypes["default"].number,
  bottomBuffer: _propTypes["default"].number
});
(0, _defineProperty2["default"])(CustomPalette, "defaultProps", {
  defaultSketcherPos: {
    top: '320px',
    left: '320px'
  },
  sketcherHeight: 228,
  bottomBuffer: 212
});

var _default = (0, _styledComponents.withTheme)(CustomPalette);

exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3NpZGUtcGFuZWwvbGF5ZXItcGFuZWwvY3VzdG9tLXBhbGV0dGUuanMiXSwibmFtZXMiOlsiZHJhZ0hhbmRsZUFjdGl2ZSIsImNzcyIsInByb3BzIiwidGhlbWUiLCJ0ZXh0Q29sb3JIbCIsIlN0eWxlZFNvcnRhYmxlSXRlbSIsInN0eWxlZCIsImRpdiIsImRyb3Bkb3duV3JhcHBlcloiLCJwYW5lbEJhY2tncm91bmRIb3ZlciIsIlN0eWxlZERyYWdIYW5kbGUiLCJTdHlsZWRUcmFzaCIsInRleHRDb2xvciIsInN1YnRleHRDb2xvckFjdGl2ZSIsIlN0eWxlZExpbmUiLCJsYWJlbENvbG9yIiwiU3R5bGVkU3dhdGNoIiwiYXR0cnMiLCJjbGFzc05hbWUiLCJjb2xvciIsImJveFNoYWRvdyIsIlN0eWxlZENvbG9yUmFuZ2UiLCJTdHlsZWRCdXR0b25Db250YWluZXIiLCJTdHlsZWRJbmxpbmVJbnB1dCIsIlNvcnRhYmxlSXRlbSIsImNoaWxkcmVuIiwiaXNTb3J0aW5nIiwic29ydGluZyIsIlNvcnRhYmxlQ29udGFpbmVyIiwiRHJhZ0hhbmRsZSIsIkN1c3RvbVBhbGV0dGUiLCJzaG93U2tldGNoZXIiLCJzaG93U2tldGNoZXJTZWxlY3RvciIsImRlZmF1bHRTa2V0Y2hlclBvcyIsImJvdHRvbUJ1ZmZlciIsInNrZXRjaGVySGVpZ2h0Iiwicm9vdCIsImN1cnJlbnQiLCJzaWRlUGFuZWxJbm5lclBhZGRpbmciLCJzaWRlUGFuZWwiLCJzaWRlUGFuZWxTY3JvbGxCYXJXaWR0aCIsInNpZGVQYW5lbExlZnQiLCJtYXJnaW4iLCJsZWZ0Iiwib2Zmc2V0WCIsImJvdW5kaW5nIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwieCIsInkiLCJ3aWR0aCIsInRvcCIsIndpbmRvdyIsImlubmVySGVpZ2h0IiwidGhlbWVTZWxlY3RvciIsInNrZXRjaGVyUG9zU2VsZWN0b3IiLCJza2V0Y2hlclBvcyIsImNvbnRlbnQiLCJib3JkZXIiLCJyaWdodCIsImJvdHRvbSIsInBhZGRpbmciLCJib3JkZXJSYWRpdXMiLCJwYW5lbEJvcmRlclJhZGl1cyIsIm92ZXJsYXkiLCJiYWNrZ3JvdW5kQ29sb3IiLCJjb2xvcnMiLCJjdXN0b21QYWxldHRlIiwibmV3Q29sb3JzIiwiaGV4IiwiX3NldENvbG9yUGFsZXR0ZVVJIiwiaW5kZXgiLCJsZW5ndGgiLCJzcGxpY2UiLCJvblRvZ2dsZVNrZXRjaGVyIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIm9uQ2FuY2VsIiwib25BcHBseSIsIm9sZEluZGV4IiwibmV3SW5kZXgiLCJzZXRTdGF0ZSIsInZhbHVlIiwidGFyZ2V0IiwidG9VcHBlckNhc2UiLCJzZXRDdXN0b21QYWxldHRlIiwibW9kYWxTdHlsZXMiLCJtb2RhbFN0eWxlc1NlbGVjdG9yIiwiX29uU29ydEVuZCIsIl9vblNvcnRTdGFydCIsIm1hcCIsInN0YXRlIiwiZSIsIl9vblN3YXRjaENsaWNrIiwiX2lucHV0Q29sb3JIZXgiLCJfb25Db2xvckRlbGV0ZSIsIl9vbkNvbG9yQWRkIiwiX29uQXBwbHkiLCJyZW1vdmVDaGlsZCIsImFwcGVuZENoaWxkIiwiX29uUGlja2VyVXBkYXRlIiwiX29uU3dhdGNoQ2xvc2UiLCJDb21wb25lbnQiLCJQcm9wVHlwZXMiLCJzaGFwZSIsIm5hbWUiLCJzdHJpbmciLCJ0eXBlIiwiY2F0ZWdvcnkiLCJhcnJheU9mIiwiZnVuYyIsIm9uZU9mVHlwZSIsImJvb2wiLCJudW1iZXIiLCJvYmplY3QiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBb0JBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUtBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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TlQsaUNBQVVKLGFBQVYsQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxOSBVYmVyIFRlY2hub2xvZ2llcywgSW5jLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4vLyBUSEUgU09GVFdBUkUuXG5cbmltcG9ydCBSZWFjdCwge0NvbXBvbmVudCwgY3JlYXRlUmVmfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQge2NyZWF0ZVNlbGVjdG9yfSBmcm9tICdyZXNlbGVjdCc7XG5pbXBvcnQgc3R5bGVkLCB7d2l0aFRoZW1lLCBjc3N9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCB7XG4gIHNvcnRhYmxlQ29udGFpbmVyLFxuICBzb3J0YWJsZUVsZW1lbnQsXG4gIHNvcnRhYmxlSGFuZGxlXG59IGZyb20gJ3JlYWN0LXNvcnRhYmxlLWhvYyc7XG5pbXBvcnQgTW9kYWwgZnJvbSAncmVhY3QtbW9kYWwnO1xuXG5pbXBvcnQge0J1dHRvbiwgSW5saW5lSW5wdXR9IGZyb20gJ2NvbXBvbmVudHMvY29tbW9uL3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCB7VmVydERvdHMsIFRyYXNofSBmcm9tICdjb21wb25lbnRzL2NvbW1vbi9pY29ucyc7XG5pbXBvcnQgQ29sb3JQYWxldHRlIGZyb20gJy4vY29sb3ItcGFsZXR0ZSc7XG5pbXBvcnQgQ3VzdG9tUGlja2VyIGZyb20gJy4vY3VzdG9tLXBpY2tlcic7XG5pbXBvcnQge2FycmF5TW92ZX0gZnJvbSAndXRpbHMvZGF0YS11dGlscyc7XG5cbmNvbnN0IGRyYWdIYW5kbGVBY3RpdmUgPSBjc3NgXG4gIC5sYXllcl9fZHJhZy1oYW5kbGUge1xuICAgIGNvbG9yOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLnRleHRDb2xvckhsfTtcbiAgICBvcGFjaXR5OiAxO1xuICAgIGN1cnNvcjogbW92ZTtcbiAgfVxuYDtcblxuY29uc3QgU3R5bGVkU29ydGFibGVJdGVtID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZy10b3A6IDZweDtcbiAgcGFkZGluZy1ib3R0b206IDZweDtcbiAgei1pbmRleDogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5kcm9wZG93bldyYXBwZXJaICsgMX07XG5cbiAgOm5vdCguc29ydGluZykge1xuICAgIDpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLnBhbmVsQmFja2dyb3VuZEhvdmVyfTtcbiAgICAgICR7ZHJhZ0hhbmRsZUFjdGl2ZX1cbiAgICB9XG4gIH1cblxuICAmLnNvcnRpbmctY29sb3JzIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLnBhbmVsQmFja2dyb3VuZEhvdmVyfTtcbiAgICAke2RyYWdIYW5kbGVBY3RpdmV9XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZERyYWdIYW5kbGUgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBvcGFjaXR5OiAwO1xuYDtcblxuY29uc3QgU3R5bGVkVHJhc2ggPSBzdHlsZWQuZGl2YFxuICBjb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS50ZXh0Q29sb3J9O1xuICBzdmcge1xuICAgIDpob3ZlciB7XG4gICAgICBjb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5zdWJ0ZXh0Q29sb3JBY3RpdmV9O1xuICAgIH1cbiAgfVxuICBoZWlnaHQ6IDEycHg7XG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICBtYXJnaW4tcmlnaHQ6IDEycHg7XG4gIDpob3ZlciB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICB9XG5gO1xuXG5jb25zdCBTdHlsZWRMaW5lID0gc3R5bGVkLmRpdmBcbiAgd2lkdGg6IGNhbGMoMTAwJSAtIDE2cHgpO1xuICBoZWlnaHQ6IDFweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5sYWJlbENvbG9yfTtcbiAgbWFyZ2luLXRvcDogOHB4O1xuICBtYXJnaW4tbGVmdDogOHB4O1xuYDtcblxuY29uc3QgU3R5bGVkU3dhdGNoID0gc3R5bGVkLmRpdi5hdHRycyh7XG4gIGNsYXNzTmFtZTogJ2N1c3RvbS1wYWxldHRlX19zd2F0Y2gnXG59KWBcbiAgYmFja2dyb3VuZC1jb2xvcjogJHtwcm9wcyA9PiBwcm9wcy5jb2xvcn07XG4gIHdpZHRoOiAzMnB4O1xuICBoZWlnaHQ6IDE4cHg7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgOmhvdmVyIHtcbiAgICBib3gtc2hhZG93OiAke3Byb3BzID0+IHByb3BzLnRoZW1lLmJveFNoYWRvd307XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICB9XG5gO1xuXG5jb25zdCBTdHlsZWRDb2xvclJhbmdlID0gc3R5bGVkLmRpdmBcbiAgcGFkZGluZzogMCA4cHg7XG4gIDpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5wYW5lbEJhY2tncm91bmRIb3Zlcn07XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICB9XG5gO1xuXG5jb25zdCBTdHlsZWRCdXR0b25Db250YWluZXIgPSBzdHlsZWQuZGl2YFxuICBtYXJnaW4tdG9wOiAxMXB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBkaXJlY3Rpb246IHJ0bDtcbmA7XG5cbmNvbnN0IFN0eWxlZElubGluZUlucHV0ID0gc3R5bGVkLmRpdmBcbiAgbWFyZ2luLWxlZnQ6IDEycHg7XG4gIGlucHV0IHtcbiAgICBjb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS50ZXh0Q29sb3JIbH07XG4gICAgZm9udC1zaXplOiAxMHB4O1xuICB9XG5gO1xuXG5jb25zdCBTb3J0YWJsZUl0ZW0gPSBzb3J0YWJsZUVsZW1lbnQoKHtjaGlsZHJlbiwgaXNTb3J0aW5nfSkgPT4gKFxuICA8U3R5bGVkU29ydGFibGVJdGVtXG4gICAgY2xhc3NOYW1lPXtjbGFzc25hbWVzKCdjdXN0b20tcGFsZXR0ZV9fc29ydGFibGUtaXRlbXMnLCB7c29ydGluZzogaXNTb3J0aW5nfSl9XG4gID5cbiAgICB7Y2hpbGRyZW59XG4gIDwvU3R5bGVkU29ydGFibGVJdGVtPlxuKSk7XG5cbmNvbnN0IFNvcnRhYmxlQ29udGFpbmVyID0gc29ydGFibGVDb250YWluZXIoKHtjaGlsZHJlbn0pID0+IChcbiAgPGRpdj57Y2hpbGRyZW59PC9kaXY+XG4pKTtcblxuY29uc3QgRHJhZ0hhbmRsZSA9IHNvcnRhYmxlSGFuZGxlKCh7Y2xhc3NOYW1lLCBjaGlsZHJlbn0pID0+IChcbiAgPFN0eWxlZERyYWdIYW5kbGUgY2xhc3NOYW1lPXtjbGFzc05hbWV9PntjaGlsZHJlbn08L1N0eWxlZERyYWdIYW5kbGU+XG4pKTtcblxuY2xhc3MgQ3VzdG9tUGFsZXR0ZSBleHRlbmRzIENvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgY3VzdG9tUGFsZXR0ZTogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICB0eXBlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgY2F0ZWdvcnk6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICBjb2xvcnM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zdHJpbmcpXG4gICAgfSksXG4gICAgc2V0Q3VzdG9tUGFsZXR0ZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgc2hvd1NrZXRjaGVyOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYm9vbCwgUHJvcFR5cGVzLm51bWJlcl0pLFxuICAgIHRoZW1lOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIGRlZmF1bHRTa2V0Y2hlclBvczogUHJvcFR5cGVzLm9iamVjdCxcbiAgICBza2V0Y2hlckhlaWdodDogUHJvcFR5cGVzLm51bWJlcixcbiAgICBib3R0b21CdWZmZXI6IFByb3BUeXBlcy5udW1iZXJcbiAgfTtcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGRlZmF1bHRTa2V0Y2hlclBvczoge3RvcDogJzMyMHB4JywgbGVmdDogJzMyMHB4J30sXG4gICAgc2tldGNoZXJIZWlnaHQ6IDIyOCxcbiAgICBib3R0b21CdWZmZXI6IDIxMlxuICB9O1xuXG4gIHN0YXRlID0ge1xuICAgIC8vIGN1cnJlbnRTd2F0Y2hJbmRleDogbnVsbCxcbiAgICBpc1NvcnRpbmc6IGZhbHNlXG4gIH07XG5cbiAgcm9vdCA9IGNyZWF0ZVJlZigpO1xuXG4gIC8vIGRlcml2ZSBza2V0Y2hlciBwb3NpdGlvbiBiYXNlZCBvbiByb290IGNvbXBvbmVudFxuICBzaG93U2tldGNoZXJTZWxlY3RvciA9IHByb3BzID0+IHByb3BzLnNob3dTa2V0Y2hlcjtcbiAgdGhlbWVTZWxlY3RvciA9IHByb3BzID0+IHByb3BzLnRoZW1lO1xuICBza2V0Y2hlclBvc1NlbGVjdG9yID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgdGhpcy5zaG93U2tldGNoZXJTZWxlY3RvcixcbiAgICAoc2hvd1NrZXRjaGVyLCB0aGVtZSA9IHt9KSA9PiB7XG4gICAgICBjb25zdCB7ZGVmYXVsdFNrZXRjaGVyUG9zLCBib3R0b21CdWZmZXIsIHNrZXRjaGVySGVpZ2h0fSA9IHRoaXMucHJvcHM7XG4gICAgICBpZiAoc2hvd1NrZXRjaGVyID09PSBmYWxzZSB8fCAhdGhpcy5yb290IHx8ICF0aGlzLnJvb3QuY3VycmVudClcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRTa2V0Y2hlclBvcztcbiAgICAgIGNvbnN0IHtzaWRlUGFuZWxJbm5lclBhZGRpbmcgPSAxNiwgc2lkZVBhbmVsID0ge30sIHNpZGVQYW5lbFNjcm9sbEJhcldpZHRoID0gMTB9ID0gdGhlbWU7XG4gICAgICBjb25zdCBzaWRlUGFuZWxMZWZ0ID0gKHNpZGVQYW5lbC5tYXJnaW4gfHwge30pLmxlZnQgfHwgMjA7XG4gICAgICBjb25zdCBvZmZzZXRYID0gc2lkZVBhbmVsSW5uZXJQYWRkaW5nICsgc2lkZVBhbmVsTGVmdCArIHNpZGVQYW5lbFNjcm9sbEJhcldpZHRoO1xuICAgICAgLy8gZmluZCBjb21wb25lbnQgUm9vdCBwb3NpdGlvblxuICAgICAgY29uc3QgYm91bmRpbmcgPSB0aGlzLnJvb3QuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGNvbnN0IHt4LCB5LCB3aWR0aH0gPSBib3VuZGluZztcblxuICAgICAgLy8gc2V0IHRoZSB0b3Agc28gaXQgd29uJ3QgY29sbGlkZSB3aXRoIGJvdHRvbSB3aWRnZXRcbiAgICAgIGNvbnN0IHRvcCA9XG4gICAgICAgIHkgKyBza2V0Y2hlckhlaWdodCA8PSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBib3R0b21CdWZmZXJcbiAgICAgICAgICA/IHlcbiAgICAgICAgICA6IHdpbmRvdy5pbm5lckhlaWdodCAtIGJvdHRvbUJ1ZmZlciAtIHNrZXRjaGVySGVpZ2h0O1xuXG4gICAgICByZXR1cm4ge3RvcDogYCR7dG9wfXB4YCwgbGVmdDogYCR7eCArIHdpZHRoICsgb2Zmc2V0WH1weGB9O1xuICAgIH1cbiAgKTtcblxuICBtb2RhbFN0eWxlc1NlbGVjdG9yID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgdGhpcy50aGVtZVNlbGVjdG9yLFxuICAgIHRoaXMuc2tldGNoZXJQb3NTZWxlY3RvcixcbiAgICAodGhlbWUsIHNrZXRjaGVyUG9zKSA9PiAoe1xuICAgICAgY29udGVudDoge1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIGJvcmRlcjogMCxcbiAgICAgICAgcmlnaHQ6ICdhdXRvJyxcbiAgICAgICAgYm90dG9tOiAnYXV0bycsXG4gICAgICAgIHBhZGRpbmc6ICcwcHggMHB4IDBweCAwcHgnLFxuICAgICAgICBib3JkZXJSYWRpdXM6IHRoZW1lLnBhbmVsQm9yZGVyUmFkaXVzIHx8ICcycHgnXG4gICAgICB9LFxuICAgICAgb3ZlcmxheToge1xuICAgICAgICAuLi5za2V0Y2hlclBvcyxcbiAgICAgICAgcmlnaHQ6ICdhdXRvJyxcbiAgICAgICAgYm90dG9tOiAnYXV0bycsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMCwgMCwgMCwgMCknXG4gICAgICB9XG4gICAgfSlcbiAgKVxuICBfc2V0Q29sb3JQYWxldHRlVUkoY29sb3JzKSB7XG4gICAgdGhpcy5wcm9wcy5zZXRDdXN0b21QYWxldHRlKHtcbiAgICAgIGNvbG9yc1xuICAgIH0pO1xuICB9XG5cbiAgX29uUGlja2VyVXBkYXRlID0gY29sb3IgPT4ge1xuICAgIGNvbnN0IHtjb2xvcnN9ID0gdGhpcy5wcm9wcy5jdXN0b21QYWxldHRlO1xuICAgIGNvbnN0IG5ld0NvbG9ycyA9IFsuLi5jb2xvcnNdO1xuICAgIG5ld0NvbG9yc1t0aGlzLnByb3BzLnNob3dTa2V0Y2hlcl0gPSBjb2xvci5oZXg7XG4gICAgdGhpcy5fc2V0Q29sb3JQYWxldHRlVUkobmV3Q29sb3JzKTtcbiAgfTtcblxuICBfb25Db2xvckRlbGV0ZSA9IGluZGV4ID0+IHtcbiAgICBjb25zdCB7Y29sb3JzfSA9IHRoaXMucHJvcHMuY3VzdG9tUGFsZXR0ZTtcbiAgICBjb25zdCBuZXdDb2xvcnMgPSBbLi4uY29sb3JzXTtcbiAgICBpZiAobmV3Q29sb3JzLmxlbmd0aCA+IDEpIHtcbiAgICAgIG5ld0NvbG9ycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgICB0aGlzLl9zZXRDb2xvclBhbGV0dGVVSShuZXdDb2xvcnMpO1xuICB9O1xuXG4gIF9vbkNvbG9yQWRkID0gKCkgPT4ge1xuICAgIGNvbnN0IHtjb2xvcnN9ID0gdGhpcy5wcm9wcy5jdXN0b21QYWxldHRlO1xuICAgIC8vIGFkZCB0aGUgbGFzdCBjb2xvclxuICAgIGNvbnN0IG5ld0NvbG9ycyA9IFsuLi5jb2xvcnMsIGNvbG9yc1tjb2xvcnMubGVuZ3RoIC0gMV1dO1xuICAgIHRoaXMuX3NldENvbG9yUGFsZXR0ZVVJKG5ld0NvbG9ycyk7XG4gIH07XG5cbiAgX29uU3dhdGNoQ2xpY2sgPSAoaW5kZXgpID0+IHtcbiAgICB0aGlzLnByb3BzLm9uVG9nZ2xlU2tldGNoZXIoaW5kZXgpO1xuICB9O1xuXG4gIF9vblN3YXRjaENsb3NlID0gKCkgPT4ge1xuICAgIHRoaXMucHJvcHMub25Ub2dnbGVTa2V0Y2hlcihmYWxzZSk7XG4gIH07XG5cbiAgX29uQXBwbHkgPSBldmVudCA9PiB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLnByb3BzLm9uQ2FuY2VsKCk7XG4gICAgdGhpcy5wcm9wcy5vbkFwcGx5KHRoaXMucHJvcHMuY3VzdG9tUGFsZXR0ZSwgZXZlbnQpO1xuICB9O1xuXG4gIF9vblNvcnRFbmQgPSAoe29sZEluZGV4LCBuZXdJbmRleH0pID0+IHtcbiAgICBjb25zdCB7Y29sb3JzfSA9IHRoaXMucHJvcHMuY3VzdG9tUGFsZXR0ZTtcbiAgICBjb25zdCBuZXdDb2xvcnMgPSBhcnJheU1vdmUoY29sb3JzLCBvbGRJbmRleCwgbmV3SW5kZXgpO1xuICAgIHRoaXMuX3NldENvbG9yUGFsZXR0ZVVJKG5ld0NvbG9ycyk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7aXNTb3J0aW5nOiBmYWxzZX0pO1xuICB9O1xuXG4gIF9vblNvcnRTdGFydCA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHtpc1NvcnRpbmc6IHRydWV9KTtcbiAgfTtcblxuICBfaW5wdXRDb2xvckhleCA9IChpbmRleCwge3RhcmdldDoge3ZhbHVlfX0pID0+IHtcbiAgICBjb25zdCB7Y29sb3JzfSA9IHRoaXMucHJvcHMuY3VzdG9tUGFsZXR0ZTtcbiAgICBjb25zdCBuZXdDb2xvcnMgPSBbLi4uY29sb3JzXTtcbiAgICBuZXdDb2xvcnNbaW5kZXhdID0gdmFsdWUudG9VcHBlckNhc2UoKTtcbiAgICB0aGlzLl9zZXRDb2xvclBhbGV0dGVVSShuZXdDb2xvcnMpO1xuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7Y29sb3JzfSA9IHRoaXMucHJvcHMuY3VzdG9tUGFsZXR0ZTtcbiAgICBjb25zdCBtb2RhbFN0eWxlcyA9IHRoaXMubW9kYWxTdHlsZXNTZWxlY3Rvcih0aGlzLnByb3BzKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImN1c3RvbS1wYWxldHRlLXBhbmVsXCIgcmVmPXt0aGlzLnJvb3R9PlxuICAgICAgICA8U3R5bGVkQ29sb3JSYW5nZT5cbiAgICAgICAgICA8Q29sb3JQYWxldHRlIGNvbG9ycz17Y29sb3JzfSAvPlxuICAgICAgICA8L1N0eWxlZENvbG9yUmFuZ2U+XG4gICAgICAgIDxTb3J0YWJsZUNvbnRhaW5lclxuICAgICAgICAgIGNsYXNzTmFtZT1cImN1c3RvbS1wYWxldHRlLWNvbnRhaW5lclwiXG4gICAgICAgICAgb25Tb3J0RW5kPXt0aGlzLl9vblNvcnRFbmR9XG4gICAgICAgICAgb25Tb3J0U3RhcnQ9e3RoaXMuX29uU29ydFN0YXJ0fVxuICAgICAgICAgIGxvY2tBeGlzPVwieVwiXG4gICAgICAgICAgaGVscGVyQ2xhc3M9XCJzb3J0aW5nLWNvbG9yc1wiXG4gICAgICAgICAgdXNlRHJhZ0hhbmRsZVxuICAgICAgICA+XG4gICAgICAgICAge2NvbG9ycy5tYXAoKGNvbG9yLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgPFNvcnRhYmxlSXRlbVxuICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICBpbmRleD17aW5kZXh9XG4gICAgICAgICAgICAgIGlzU29ydGluZz17dGhpcy5zdGF0ZS5pc1NvcnRpbmd9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxEcmFnSGFuZGxlIGNsYXNzTmFtZT1cImxheWVyX19kcmFnLWhhbmRsZVwiPlxuICAgICAgICAgICAgICAgIDxWZXJ0RG90cyBoZWlnaHQ9XCIyMHB4XCIgLz5cbiAgICAgICAgICAgICAgPC9EcmFnSGFuZGxlPlxuICAgICAgICAgICAgICA8U3R5bGVkU3dhdGNoXG4gICAgICAgICAgICAgICAgY29sb3I9e2NvbG9yfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2UgPT4gdGhpcy5fb25Td2F0Y2hDbGljayhpbmRleCwgZSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxTdHlsZWRJbmxpbmVJbnB1dD5cbiAgICAgICAgICAgICAgICA8SW5saW5lSW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImN1c3RvbS1wYWxldHRlLWhleF9faW5wdXRcIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2NvbG9yLnRvVXBwZXJDYXNlKCl9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB0aGlzLl9pbnB1dENvbG9ySGV4KGluZGV4LCBlKX1cbiAgICAgICAgICAgICAgICAgIGlkPVwiaW5wdXQtbGF5ZXItbGFiZWxcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvU3R5bGVkSW5saW5lSW5wdXQ+XG4gICAgICAgICAgICAgIDxTdHlsZWRUcmFzaCBvbkNsaWNrPXsoKSA9PiB0aGlzLl9vbkNvbG9yRGVsZXRlKGluZGV4KX0+XG4gICAgICAgICAgICAgICAgPFRyYXNoIGNsYXNzTmFtZT1cInRyYXNoYmluXCIgLz5cbiAgICAgICAgICAgICAgPC9TdHlsZWRUcmFzaD5cbiAgICAgICAgICAgIDwvU29ydGFibGVJdGVtPlxuICAgICAgICAgICkpfVxuICAgICAgICA8L1NvcnRhYmxlQ29udGFpbmVyPlxuICAgICAgICB7LyogQWRkIFN0ZXAgQnV0dG9uICovfVxuICAgICAgICA8QnV0dG9uIGNsYXNzTmFtZT1cImFkZC1zdGVwX19idXR0b25cIiBsaW5rIG9uQ2xpY2s9e3RoaXMuX29uQ29sb3JBZGR9PlxuICAgICAgICAgICsgQWRkIFN0ZXBcbiAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDxTdHlsZWRMaW5lIC8+XG4gICAgICAgIHsvKiBDYW5jZWwgb3IgQ29uZmlybSBCdXR0b25zICovfVxuICAgICAgICA8U3R5bGVkQnV0dG9uQ29udGFpbmVyPlxuICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPVwiY29uZmlybS1hcHBseV9fYnV0dG9uXCIgbGluayBvbkNsaWNrPXt0aGlzLl9vbkFwcGx5fT5cbiAgICAgICAgICAgIENvbmZpcm1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8QnV0dG9uIGxpbmsgb25DbGljaz17dGhpcy5wcm9wcy5vbkNhbmNlbH0+XG4gICAgICAgICAgICB7JyAnfVxuICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvU3R5bGVkQnV0dG9uQ29udGFpbmVyPlxuICAgICAgICB7dGhpcy5wcm9wcy5zaG93U2tldGNoZXIgIT09IGZhbHNlID8gKFxuICAgICAgICAgIDxNb2RhbFxuICAgICAgICAgICAgaXNPcGVuXG4gICAgICAgICAgICBzdHlsZT17bW9kYWxTdHlsZXN9XG4gICAgICAgICAgICBhcmlhSGlkZUFwcD17ZmFsc2V9XG4gICAgICAgICAgICBwYXJlbnRTZWxlY3Rvcj17KCkgPT4ge1xuICAgICAgICAgICAgICAvLyBSZWFjdCBtb2RhbCBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0anMvcmVhY3QtbW9kYWwvaXNzdWVzLzc2OVxuICAgICAgICAgICAgICAvLyBmYWlsZWQgdG8gZXhlY3V0ZSByZW1vdmVDaGlsZCBvbiBwYXJlbnQgbm9kZSB3aGVuIGl0IGlzIGFscmVhZHkgdW5tb3VudGVkXG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLnJvb3QuY3VycmVudCB8fCB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGQ6ICgpID0+IHt9LFxuICAgICAgICAgICAgICAgIGFwcGVuZENoaWxkOiAoKSA9PiB7fVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxDdXN0b21QaWNrZXJcbiAgICAgICAgICAgICAgY29sb3I9e2NvbG9yc1t0aGlzLnByb3BzLnNob3dTa2V0Y2hlcl19XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblBpY2tlclVwZGF0ZX1cbiAgICAgICAgICAgICAgb25Td2F0Y2hDbG9zZT17dGhpcy5fb25Td2F0Y2hDbG9zZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgKSA6IG51bGx9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhUaGVtZShDdXN0b21QYWxldHRlKTtcbiJdfQ==