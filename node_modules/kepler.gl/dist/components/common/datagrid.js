"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.CellFactory = exports.FieldHeaderFactory = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactVirtualized = require("react-virtualized");

var _styledComponents = _interopRequireWildcard(require("styled-components"));

var _reselect = require("reselect");

var _classnames2 = _interopRequireDefault(require("classnames"));

var _fieldToken = _interopRequireDefault(require("./field-token"));

var _icons = require("./icons");

var _dataUtils = require("../../utils/data-utils");

var _constants = require("../../constants");

function _templateObject3() {
  var data = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  border-right: 0;\n  border-bottom: ", ";\n  color: ", ";\n  text-overflow: ellipsis;\n  height: 100%;\n  width: 100%;\n\n  span {\n    text-overflow: ellipsis;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n    width: 100%;\n  }\n"]);

  _templateObject3 = function _templateObject3() {
    return data;
  };

  return data;
}

function _templateObject2() {
  var data = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  align-items: center;\n  justify-content: left;\n  border-right: 0;\n  border-bottom: 0;\n  background: ", ";\n  color: ", ";\n  height: 100%;\n\n  .header-content {\n    display: flex;\n    flex-direction: column;\n  }\n\n  .label-wrapper {\n    display: flex;\n    align-items: center;\n  }\n\n  .icon-wrapper {\n    margin-right: ", ";\n    height: 16px;\n  }\n"]);

  _templateObject2 = function _templateObject2() {
    return data;
  };

  return data;
}

function _templateObject() {
  var data = (0, _taggedTemplateLiteral2["default"])(["\n  width: 100%;\n  overflow-x: auto;\n\n  .ReactVirtualized__Grid:focus,\n  .ReactVirtualized__Grid:active {\n    outline: 0;\n  }\n  .ReactVirtualized__Grid__innerScrollContainer {\n    ", ";\n  }\n\n  .ReactVirtualized__Grid {\n    .column-0 .cell {\n      padding-left: ", "px;\n    }\n\n    .header-0 .header-cell {\n      padding-left: ", "px;\n    }\n\n    .cell {\n      overflow-y: auto;\n      overflow-x: hidden;\n      padding-right: ", "px;\n    }\n\n    .last {\n      .cell {\n        padding-right: ", "px;\n      }\n      .header-cell {\n        padding-right: ", "px;\n      }\n    }\n  }\n"]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}

var DataGridWrapper = _styledComponents["default"].div(_templateObject(), function (props) {
  return props.theme.modalScrollBar;
}, function (props) {
  return props.theme.gridPaddingSide;
}, function (props) {
  return props.theme.gridPaddingSide;
}, function (props) {
  return props.theme.cellPaddingSide;
}, function (props) {
  return props.theme.gridPaddingSide;
}, function (props) {
  return props.theme.gridPaddingSide;
});

var StyledFieldHeader = _styledComponents["default"].div(_templateObject2(), function (props) {
  return props.theme.panelBackgroundLT;
}, function (props) {
  return props.theme.titleColorLT;
}, function (props) {
  return props.type === 'timestamp' ? '2px' : '0';
});

var FieldHeaderFactory = function FieldHeaderFactory() {
  var Header = function Header(_ref) {
    var className = _ref.className,
        value = _ref.value,
        type = _ref.type;
    return _react["default"].createElement(StyledFieldHeader, {
      className: className || '',
      type: type,
      title: value
    }, _react["default"].createElement("div", {
      className: "field-header-content"
    }, _react["default"].createElement("div", {
      className: "label-wrapper"
    }, _react["default"].createElement("div", {
      className: "icon-wrapper"
    }, type === 'timestamp' ? _react["default"].createElement(_icons.Clock, {
      height: "16px"
    }) : null), _react["default"].createElement("span", null, value)), _react["default"].createElement("div", {
      className: "field-wrapper"
    }, _react["default"].createElement(_fieldToken["default"], {
      type: type
    }))));
  };

  Header.displayName = 'Header';
  return Header;
};

exports.FieldHeaderFactory = FieldHeaderFactory;

var StyledCell = _styledComponents["default"].div(_templateObject3(), function (props) {
  return props.theme.panelBorderLT;
}, function (props) {
  return props.theme.labelColorLT;
});

var CellFactory = function CellFactory() {
  var Cell = function Cell(_ref2) {
    var className = _ref2.className,
        value = _ref2.value;
    return _react["default"].createElement(StyledCell, {
      className: className || '',
      title: value
    }, _react["default"].createElement("span", null, value));
  };

  Cell.displayName = 'Cell';
  return Cell;
};

exports.CellFactory = CellFactory;
DataGridFactory.deps = [FieldHeaderFactory, CellFactory];

function DataGridFactory(FieldHeader, Cell) {
  var DataGrid =
  /*#__PURE__*/
  function (_PureComponent) {
    (0, _inherits2["default"])(DataGrid, _PureComponent);

    function DataGrid() {
      var _getPrototypeOf2;

      var _this;

      (0, _classCallCheck2["default"])(this, DataGrid);

      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      _this = (0, _possibleConstructorReturn2["default"])(this, (_getPrototypeOf2 = (0, _getPrototypeOf3["default"])(DataGrid)).call.apply(_getPrototypeOf2, [this].concat(args)));
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "columnsSelector", function (props) {
        return props.columns;
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "hasGeojson", (0, _reselect.createSelector)(_this.columnsSelector, function (columns) {
        return columns.some(function (c) {
          return c.type === _constants.ALL_FIELD_TYPES.geojson;
        });
      }));
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_cellRenderer", function (_ref3) {
        var _classnames;

        var columnIndex = _ref3.columnIndex,
            key = _ref3.key,
            rowIndex = _ref3.rowIndex,
            style = _ref3.style;
        var _this$props = _this.props,
            columns = _this$props.columns,
            rows = _this$props.rows;
        var isLast = columnIndex === columns.length - 1;
        var type = columns[columnIndex].type; // rowIndex -1 because data rows start rendering at index 1 and we normalize back using the -1 param

        var className = (0, _classnames2["default"])((_classnames = {
          last: isLast
        }, (0, _defineProperty2["default"])(_classnames, "header-".concat(columnIndex), rowIndex === 0), (0, _defineProperty2["default"])(_classnames, "row-".concat(rowIndex - 1, " column-").concat(columnIndex), rowIndex > 0), _classnames));
        return _react["default"].createElement("div", {
          key: key,
          style: style,
          className: className
        }, rowIndex === 0 ? _react["default"].createElement(FieldHeader, {
          className: "header-cell ".concat(type),
          value: columns[columnIndex].name,
          type: type
        }) : _react["default"].createElement(Cell, {
          className: "cell ".concat(type),
          value: (0, _dataUtils.parseFieldValue)(rows[rowIndex - 1][columnIndex], type),
          type: type
        }));
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_rowHeight", function (_ref4) {
        var index = _ref4.index;
        return index === 0 ? _this.props.theme.cellHeaderHeight : _this.hasGeojson(_this.props) ? _this.props.theme.extendCellHeight : _this.props.theme.cellHeight;
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_columnWidth", function (_ref5) {
        var index = _ref5.index;
        var isGeojsonField = _this.props.columns[index].type === _constants.ALL_FIELD_TYPES.geojson;
        return isGeojsonField ? _this.props.theme.extendColumnWidth : _this.props.theme.columnWidth;
      });
      return _this;
    }

    (0, _createClass2["default"])(DataGrid, [{
      key: "render",
      value: function render() {
        var _this$props2 = this.props,
            columns = _this$props2.columns,
            height = _this$props2.height,
            rows = _this$props2.rows,
            theme = _this$props2.theme,
            width = _this$props2.width;
        return _react["default"].createElement(DataGridWrapper, {
          className: "datagrid-wrapper"
        }, _react["default"].createElement(_reactVirtualized.MultiGrid, {
          cellRenderer: this._cellRenderer,
          columnWidth: this._columnWidth,
          columnCount: columns.length,
          fixedRowCount: 1,
          enableFixedRowScroll: true,
          width: width || theme.gridDefaultWidth,
          height: height || theme.gridDefaultHeight,
          rowHeight: this._rowHeight,
          rowCount: rows.length + 1,
          hideTopRightGridScrollbar: true,
          hideBottomLeftGridScrollbar: true
        }));
      }
    }]);
    return DataGrid;
  }(_react.PureComponent);

  (0, _defineProperty2["default"])(DataGrid, "propTypes", {
    theme: _propTypes["default"].object,
    columns: _propTypes["default"].arrayOf(_propTypes["default"].object).isRequired,
    height: _propTypes["default"].number.isRequired,
    rows: _propTypes["default"].arrayOf(_propTypes["default"].arrayOf(_propTypes["default"].any)).isRequired,
    width: _propTypes["default"].number.isRequired
  });
  DataGrid.displayName = 'DataGrid'; // Wrapping the component using withTheme because we need to
  // access variables outside sytled-components context

  return (0, _styledComponents.withTheme)(DataGrid);
}

var _default = DataGridFactory;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL2NvbW1vbi9kYXRhZ3JpZC5qcyJdLCJuYW1lcyI6WyJEYXRhR3JpZFdyYXBwZXIiLCJzdHlsZWQiLCJkaXYiLCJwcm9wcyIsInRoZW1lIiwibW9kYWxTY3JvbGxCYXIiLCJncmlkUGFkZGluZ1NpZGUiLCJjZWxsUGFkZGluZ1NpZGUiLCJTdHlsZWRGaWVsZEhlYWRlciIsInBhbmVsQmFja2dyb3VuZExUIiwidGl0bGVDb2xvckxUIiwidHlwZSIsIkZpZWxkSGVhZGVyRmFjdG9yeSIsIkhlYWRlciIsImNsYXNzTmFtZSIsInZhbHVlIiwiZGlzcGxheU5hbWUiLCJTdHlsZWRDZWxsIiwicGFuZWxCb3JkZXJMVCIsImxhYmVsQ29sb3JMVCIsIkNlbGxGYWN0b3J5IiwiQ2VsbCIsIkRhdGFHcmlkRmFjdG9yeSIsImRlcHMiLCJGaWVsZEhlYWRlciIsIkRhdGFHcmlkIiwiY29sdW1ucyIsImNvbHVtbnNTZWxlY3RvciIsInNvbWUiLCJjIiwiQUxMX0ZJRUxEX1RZUEVTIiwiZ2VvanNvbiIsImNvbHVtbkluZGV4Iiwia2V5Iiwicm93SW5kZXgiLCJzdHlsZSIsInJvd3MiLCJpc0xhc3QiLCJsZW5ndGgiLCJsYXN0IiwibmFtZSIsImluZGV4IiwiY2VsbEhlYWRlckhlaWdodCIsImhhc0dlb2pzb24iLCJleHRlbmRDZWxsSGVpZ2h0IiwiY2VsbEhlaWdodCIsImlzR2VvanNvbkZpZWxkIiwiZXh0ZW5kQ29sdW1uV2lkdGgiLCJjb2x1bW5XaWR0aCIsImhlaWdodCIsIndpZHRoIiwiX2NlbGxSZW5kZXJlciIsIl9jb2x1bW5XaWR0aCIsImdyaWREZWZhdWx0V2lkdGgiLCJncmlkRGVmYXVsdEhlaWdodCIsIl9yb3dIZWlnaHQiLCJQdXJlQ29tcG9uZW50IiwiUHJvcFR5cGVzIiwib2JqZWN0IiwiYXJyYXlPZiIsImlzUmVxdWlyZWQiLCJudW1iZXIiLCJhbnkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QUFYL0IsVUFERixDQURGO0FBaUJEO0FBbEVIO0FBQUE7QUFBQSxJQUN1QmtCLG9CQUR2Qjs7QUFBQSxtQ0FDTS9CLFFBRE4sZUFFcUI7QUFDakJyQixJQUFBQSxLQUFLLEVBQUVxRCxzQkFBVUMsTUFEQTtBQUVqQmhDLElBQUFBLE9BQU8sRUFBRStCLHNCQUFVRSxPQUFWLENBQWtCRixzQkFBVUMsTUFBNUIsRUFBb0NFLFVBRjVCO0FBR2pCWCxJQUFBQSxNQUFNLEVBQUVRLHNCQUFVSSxNQUFWLENBQWlCRCxVQUhSO0FBSWpCeEIsSUFBQUEsSUFBSSxFQUFFcUIsc0JBQVVFLE9BQVYsQ0FBa0JGLHNCQUFVRSxPQUFWLENBQWtCRixzQkFBVUssR0FBNUIsQ0FBbEIsRUFBb0RGLFVBSnpDO0FBS2pCVixJQUFBQSxLQUFLLEVBQUVPLHNCQUFVSSxNQUFWLENBQWlCRDtBQUxQLEdBRnJCO0FBcUVBbkMsRUFBQUEsUUFBUSxDQUFDVCxXQUFULEdBQXVCLFVBQXZCLENBckVBLENBdUVBO0FBQ0E7O0FBQ0EsU0FBTyxpQ0FBVVMsUUFBVixDQUFQO0FBQ0Q7O2VBRWNILGUiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTkgVWJlciBUZWNobm9sb2dpZXMsIEluYy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuLy8gVEhFIFNPRlRXQVJFLlxuXG5pbXBvcnQgUmVhY3QsIHtQdXJlQ29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHtNdWx0aUdyaWR9IGZyb20gJ3JlYWN0LXZpcnR1YWxpemVkJztcbmltcG9ydCBzdHlsZWQsIHt3aXRoVGhlbWV9ZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuaW1wb3J0IHtjcmVhdGVTZWxlY3Rvcn0gZnJvbSAncmVzZWxlY3QnO1xuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgRmllbGRUb2tlbiBmcm9tICdjb21wb25lbnRzL2NvbW1vbi9maWVsZC10b2tlbic7XG5pbXBvcnQge0Nsb2NrfSBmcm9tICdjb21wb25lbnRzL2NvbW1vbi9pY29ucy9pbmRleCc7XG5pbXBvcnQge3BhcnNlRmllbGRWYWx1ZX0gZnJvbSAndXRpbHMvZGF0YS11dGlscyc7XG5pbXBvcnQge0FMTF9GSUVMRF9UWVBFU30gZnJvbSAnY29uc3RhbnRzJztcblxuY29uc3QgRGF0YUdyaWRXcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgd2lkdGg6IDEwMCU7XG4gIG92ZXJmbG93LXg6IGF1dG87XG5cbiAgLlJlYWN0VmlydHVhbGl6ZWRfX0dyaWQ6Zm9jdXMsXG4gIC5SZWFjdFZpcnR1YWxpemVkX19HcmlkOmFjdGl2ZSB7XG4gICAgb3V0bGluZTogMDtcbiAgfVxuICAuUmVhY3RWaXJ0dWFsaXplZF9fR3JpZF9faW5uZXJTY3JvbGxDb250YWluZXIge1xuICAgICR7cHJvcHMgPT4gcHJvcHMudGhlbWUubW9kYWxTY3JvbGxCYXJ9O1xuICB9XG5cbiAgLlJlYWN0VmlydHVhbGl6ZWRfX0dyaWQge1xuICAgIC5jb2x1bW4tMCAuY2VsbCB7XG4gICAgICBwYWRkaW5nLWxlZnQ6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuZ3JpZFBhZGRpbmdTaWRlfXB4O1xuICAgIH1cblxuICAgIC5oZWFkZXItMCAuaGVhZGVyLWNlbGwge1xuICAgICAgcGFkZGluZy1sZWZ0OiAke3Byb3BzID0+IHByb3BzLnRoZW1lLmdyaWRQYWRkaW5nU2lkZX1weDtcbiAgICB9XG5cbiAgICAuY2VsbCB7XG4gICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgb3ZlcmZsb3cteDogaGlkZGVuO1xuICAgICAgcGFkZGluZy1yaWdodDogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5jZWxsUGFkZGluZ1NpZGV9cHg7XG4gICAgfVxuXG4gICAgLmxhc3Qge1xuICAgICAgLmNlbGwge1xuICAgICAgICBwYWRkaW5nLXJpZ2h0OiAke3Byb3BzID0+IHByb3BzLnRoZW1lLmdyaWRQYWRkaW5nU2lkZX1weDtcbiAgICAgIH1cbiAgICAgIC5oZWFkZXItY2VsbCB7XG4gICAgICAgIHBhZGRpbmctcmlnaHQ6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuZ3JpZFBhZGRpbmdTaWRlfXB4O1xuICAgICAgfVxuICAgIH1cbiAgfVxuYDtcblxuY29uc3QgU3R5bGVkRmllbGRIZWFkZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGxlZnQ7XG4gIGJvcmRlci1yaWdodDogMDtcbiAgYm9yZGVyLWJvdHRvbTogMDtcbiAgYmFja2dyb3VuZDogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5wYW5lbEJhY2tncm91bmRMVH07XG4gIGNvbG9yOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLnRpdGxlQ29sb3JMVH07XG4gIGhlaWdodDogMTAwJTtcblxuICAuaGVhZGVyLWNvbnRlbnQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgfVxuXG4gIC5sYWJlbC13cmFwcGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIH1cblxuICAuaWNvbi13cmFwcGVyIHtcbiAgICBtYXJnaW4tcmlnaHQ6ICR7cHJvcHMgPT4gcHJvcHMudHlwZSA9PT0gJ3RpbWVzdGFtcCcgPyAnMnB4JyA6ICcwJ307XG4gICAgaGVpZ2h0OiAxNnB4O1xuICB9XG5gO1xuXG5leHBvcnQgY29uc3QgRmllbGRIZWFkZXJGYWN0b3J5ID0gKCkgPT4ge1xuICBjb25zdCBIZWFkZXIgPSAoe2NsYXNzTmFtZSwgdmFsdWUsIHR5cGV9KSA9PiAoXG4gICAgPFN0eWxlZEZpZWxkSGVhZGVyIGNsYXNzTmFtZT17Y2xhc3NOYW1lIHx8ICcnfSB0eXBlPXt0eXBlfSB0aXRsZT17dmFsdWV9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWVsZC1oZWFkZXItY29udGVudFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxhYmVsLXdyYXBwZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImljb24td3JhcHBlclwiPlxuICAgICAgICAgICAge3R5cGUgPT09ICd0aW1lc3RhbXAnID8gPENsb2NrIGhlaWdodD1cIjE2cHhcIiAvPiA6IG51bGx9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPHNwYW4+e3ZhbHVlfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmllbGQtd3JhcHBlclwiPlxuICAgICAgICAgIDxGaWVsZFRva2VuIHR5cGU9e3R5cGV9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9TdHlsZWRGaWVsZEhlYWRlcj5cbiAgKTtcblxuICBIZWFkZXIuZGlzcGxheU5hbWUgPSAnSGVhZGVyJztcblxuICByZXR1cm4gSGVhZGVyO1xufTtcblxuY29uc3QgU3R5bGVkQ2VsbCA9IHN0eWxlZC5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBib3JkZXItcmlnaHQ6IDA7XG4gIGJvcmRlci1ib3R0b206ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUucGFuZWxCb3JkZXJMVH07XG4gIGNvbG9yOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLmxhYmVsQ29sb3JMVH07XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHdpZHRoOiAxMDAlO1xuXG4gIHNwYW4ge1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbiAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XG4gICAgd2lkdGg6IDEwMCU7XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBDZWxsRmFjdG9yeSA9ICgpID0+IHtcbiAgY29uc3QgQ2VsbCA9ICh7Y2xhc3NOYW1lLCB2YWx1ZX0pID0+IChcbiAgICA8U3R5bGVkQ2VsbCBjbGFzc05hbWU9e2NsYXNzTmFtZSB8fCAnJ30gdGl0bGU9e3ZhbHVlfT5cbiAgICAgIDxzcGFuPnt2YWx1ZX08L3NwYW4+XG4gICAgPC9TdHlsZWRDZWxsPlxuICApO1xuXG4gIENlbGwuZGlzcGxheU5hbWUgPSAnQ2VsbCc7XG5cbiAgcmV0dXJuIENlbGw7XG59O1xuXG5EYXRhR3JpZEZhY3RvcnkuZGVwcyA9IFtcbiAgRmllbGRIZWFkZXJGYWN0b3J5LFxuICBDZWxsRmFjdG9yeVxuXTtcblxuZnVuY3Rpb24gRGF0YUdyaWRGYWN0b3J5KFxuICBGaWVsZEhlYWRlcixcbiAgQ2VsbFxuKSB7XG4gIGNsYXNzIERhdGFHcmlkIGV4dGVuZHMgUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgIHRoZW1lOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgICAgY29sdW1uczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm9iamVjdCkuaXNSZXF1aXJlZCxcbiAgICAgIGhlaWdodDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgICAgcm93czogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmFueSkpLmlzUmVxdWlyZWQsXG4gICAgICB3aWR0aDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIGNvbHVtbnNTZWxlY3RvciA9IHByb3BzID0+IHByb3BzLmNvbHVtbnM7XG4gICAgaGFzR2VvanNvbiA9IGNyZWF0ZVNlbGVjdG9yKHRoaXMuY29sdW1uc1NlbGVjdG9yLCBjb2x1bW5zID0+XG4gICAgICBjb2x1bW5zLnNvbWUoYyA9PiBjLnR5cGUgPT09IEFMTF9GSUVMRF9UWVBFUy5nZW9qc29uKVxuICAgICk7XG5cbiAgICBfY2VsbFJlbmRlcmVyID0gKHtjb2x1bW5JbmRleCwga2V5LCByb3dJbmRleCwgc3R5bGV9KSA9PiB7XG4gICAgICBjb25zdCB7Y29sdW1ucywgcm93c30gPSB0aGlzLnByb3BzO1xuICAgICAgY29uc3QgaXNMYXN0ID0gY29sdW1uSW5kZXggPT09IGNvbHVtbnMubGVuZ3RoIC0gMVxuICAgICAgY29uc3QgdHlwZSA9IGNvbHVtbnNbY29sdW1uSW5kZXhdLnR5cGU7XG5cbiAgICAgIC8vIHJvd0luZGV4IC0xIGJlY2F1c2UgZGF0YSByb3dzIHN0YXJ0IHJlbmRlcmluZyBhdCBpbmRleCAxIGFuZCB3ZSBub3JtYWxpemUgYmFjayB1c2luZyB0aGUgLTEgcGFyYW1cbiAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGNsYXNzbmFtZXMoe1xuICAgICAgICBsYXN0OiBpc0xhc3QsXG4gICAgICAgIFtgaGVhZGVyLSR7Y29sdW1uSW5kZXh9YF06IHJvd0luZGV4ID09PSAwLFxuICAgICAgICBbYHJvdy0ke3Jvd0luZGV4LTF9IGNvbHVtbi0ke2NvbHVtbkluZGV4fWBdOiByb3dJbmRleCA+IDBcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGtleT17a2V5fSBzdHlsZT17c3R5bGV9IGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cbiAgICAgICAgICB7cm93SW5kZXggPT09IDBcbiAgICAgICAgICAgID8gKDxGaWVsZEhlYWRlciBjbGFzc05hbWU9e2BoZWFkZXItY2VsbCAke3R5cGV9YH0gdmFsdWU9e2NvbHVtbnNbY29sdW1uSW5kZXhdLm5hbWV9IHR5cGU9e3R5cGV9IC8+KVxuICAgICAgICAgICAgOiAoPENlbGwgY2xhc3NOYW1lPXtgY2VsbCAke3R5cGV9YH0gdmFsdWU9e3BhcnNlRmllbGRWYWx1ZShyb3dzW3Jvd0luZGV4IC0gMV1bY29sdW1uSW5kZXhdLCB0eXBlKX0gdHlwZT17dHlwZX0gLz4pXG4gICAgICAgICAgfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfTtcblxuICAgIF9yb3dIZWlnaHQgPSAoe2luZGV4fSkgPT4gaW5kZXggPT09IDBcbiAgICAgID8gdGhpcy5wcm9wcy50aGVtZS5jZWxsSGVhZGVySGVpZ2h0XG4gICAgICA6IHRoaXMuaGFzR2VvanNvbih0aGlzLnByb3BzKSA/IHRoaXMucHJvcHMudGhlbWUuZXh0ZW5kQ2VsbEhlaWdodCA6IHRoaXMucHJvcHMudGhlbWUuY2VsbEhlaWdodDtcblxuICAgIF9jb2x1bW5XaWR0aCA9ICh7aW5kZXh9KSA9PiB7XG4gICAgICBjb25zdCBpc0dlb2pzb25GaWVsZCA9IHRoaXMucHJvcHMuY29sdW1uc1tpbmRleF0udHlwZSA9PT0gQUxMX0ZJRUxEX1RZUEVTLmdlb2pzb247XG4gICAgICByZXR1cm4gaXNHZW9qc29uRmllbGQgPyB0aGlzLnByb3BzLnRoZW1lLmV4dGVuZENvbHVtbldpZHRoIDogdGhpcy5wcm9wcy50aGVtZS5jb2x1bW5XaWR0aDtcbiAgICB9O1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgY29uc3Qge2NvbHVtbnMsIGhlaWdodCwgcm93cywgdGhlbWUsIHdpZHRofSA9IHRoaXMucHJvcHM7XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxEYXRhR3JpZFdyYXBwZXIgY2xhc3NOYW1lPVwiZGF0YWdyaWQtd3JhcHBlclwiPlxuICAgICAgICAgIDxNdWx0aUdyaWRcbiAgICAgICAgICAgIGNlbGxSZW5kZXJlcj17dGhpcy5fY2VsbFJlbmRlcmVyfVxuICAgICAgICAgICAgY29sdW1uV2lkdGg9e3RoaXMuX2NvbHVtbldpZHRofVxuICAgICAgICAgICAgY29sdW1uQ291bnQ9e2NvbHVtbnMubGVuZ3RofVxuICAgICAgICAgICAgZml4ZWRSb3dDb3VudD17MX1cbiAgICAgICAgICAgIGVuYWJsZUZpeGVkUm93U2Nyb2xsPXt0cnVlfVxuICAgICAgICAgICAgd2lkdGg9e3dpZHRoIHx8IHRoZW1lLmdyaWREZWZhdWx0V2lkdGh9XG4gICAgICAgICAgICBoZWlnaHQ9e2hlaWdodCB8fCB0aGVtZS5ncmlkRGVmYXVsdEhlaWdodH1cbiAgICAgICAgICAgIHJvd0hlaWdodD17dGhpcy5fcm93SGVpZ2h0fVxuICAgICAgICAgICAgcm93Q291bnQ9e3Jvd3MubGVuZ3RoICsgMX1cbiAgICAgICAgICAgIGhpZGVUb3BSaWdodEdyaWRTY3JvbGxiYXI9e3RydWV9XG4gICAgICAgICAgICBoaWRlQm90dG9tTGVmdEdyaWRTY3JvbGxiYXI9e3RydWV9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9EYXRhR3JpZFdyYXBwZXI+XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIERhdGFHcmlkLmRpc3BsYXlOYW1lID0gJ0RhdGFHcmlkJztcblxuICAvLyBXcmFwcGluZyB0aGUgY29tcG9uZW50IHVzaW5nIHdpdGhUaGVtZSBiZWNhdXNlIHdlIG5lZWQgdG9cbiAgLy8gYWNjZXNzIHZhcmlhYmxlcyBvdXRzaWRlIHN5dGxlZC1jb21wb25lbnRzIGNvbnRleHRcbiAgcmV0dXJuIHdpdGhUaGVtZShEYXRhR3JpZCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IERhdGFHcmlkRmFjdG9yeTtcbiJdfQ==